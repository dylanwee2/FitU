graph TB
    subgraph "External Users"
        Student[ğŸ‘¤ Students<br/>Fitness Enthusiasts]
    end
    
    subgraph "FitU Application System"
        subgraph "Client Layer"
            Browser[ğŸŒ Web Browser<br/>Desktop/Mobile/Tablet]
        end
        
        subgraph "Frontend Application"
            subgraph "Vue.js Framework"
                App[ğŸ“± App.vue<br/>Root Component]
                Router[ğŸ›£ï¸ Vue Router<br/>Navigation Controller]
                Pinia[ğŸ—ƒï¸ Pinia State Management<br/>Centralized State]
            end
            
            subgraph "Views/Pages"
                Home[ğŸ  Home Page<br/>Calorie Tracking]
                Dashboard[ğŸ“Š Dashboard<br/>Modular Widgets]
                ExerciseBrowser[ğŸ’ª Exercise Browser<br/>Exercise Library]
                VirtualGym[ğŸ‹ï¸ Virtual Gym<br/>3D Equipment]
                Vault[ğŸ—„ï¸ Vault<br/>File Storage]
                Profile[ğŸ‘¤ Profile<br/>User Settings]
                Login[ğŸ” Login/Signup<br/>Authentication]
                WorkoutSets[ğŸ“‹ Workout Sets<br/>Playlist Management]
            end
            
            subgraph "Components"
                Navbar[ğŸ§­ Navigation Bar]
                Footer[ğŸ“„ Footer]
                WorkoutCart[ğŸ›’ Workout Cart<br/>Exercise Selection]
                CalorieProgress[ğŸ“ˆ Calorie Progress<br/>Visualization]
                CalorieChart[ğŸ“Š Calorie Chart<br/>7-day View]
            end
            
            subgraph "State Management (Pinia Stores)"
                UserStore[ğŸ‘¤ User Store<br/>Authentication & Profile]
                MealsStore[ğŸ½ï¸ Meals Store<br/>Calorie Data]
                WorkoutCartStore[ğŸ›’ Workout Cart Store<br/>Exercise Selection & Playlists]
                DashboardStore[ğŸ“Š Dashboard Store<br/>Widget Layout]
            end
            
            subgraph "Services Layer"
                FirebaseService[ğŸ”¥ Firebase Service<br/>Database Operations]
                ExerciseService[ğŸ’ª Exercise Service<br/>API Integration]
                VaultService[ğŸ—„ï¸ Vault Service<br/>File Management]
                PersistenceService[ğŸ’¾ Persistence Service<br/>Local Storage]
            end
        end
        
        subgraph "Backend Application"
            ExpressServer[ğŸ–¥ï¸ Express Server<br/>API Gateway & Middleware]
            
            subgraph "Controllers"
                RecipeController[ğŸ½ï¸ Recipe Controller<br/>Spoonacular Integration]
                GeminiController[ğŸ¤– Gemini Controller<br/>AI Content Generation]
            end
            
            subgraph "Routes"
                RecipeRoutes[ğŸ½ï¸ Recipe Routes<br/>/api/recipes]
                GeminiRoutes[ğŸ¤– Gemini Routes<br/>/api/gemini]
            end
            
            subgraph "Middleware"
                CORS[ğŸŒ CORS Middleware<br/>Cross-Origin Requests]
                Auth[ğŸ” Authentication<br/>Request Validation]
            end
        end
    end
    
    subgraph "External Services"
        Firebase[ğŸ”¥ Firebase<br/>Authentication, Firestore, Storage]
        SpoonacularAPI[ğŸ½ï¸ Spoonacular API<br/>Recipe Database]
        ExerciseDBAPI[ğŸ’ª ExerciseDB API<br/>Exercise Library]
        GeminiAPI[ğŸ¤– Google Gemini AI<br/>Content Generation]
    end
    
    %% User Interactions
    Student -->|"Uses fitness tracking,<br/>workout planning,<br/>calorie monitoring"| Browser
    Browser -->|"HTTPS Requests<br/>User Interface"| App
    
    %% Frontend Internal Communication
    App --> Router
    App --> Navbar
    App --> Footer
    App --> WorkoutCart
    
    Router --> Home
    Router --> Dashboard
    Router --> ExerciseBrowser
    Router --> VirtualGym
    Router --> Vault
    Router --> Profile
    Router --> Login
    Router --> WorkoutSets
    
    Home --> CalorieProgress
    Home --> CalorieChart
    Home --> MealsStore
    
    Dashboard --> DashboardStore
    WorkoutCart --> WorkoutCartStore
    Profile --> UserStore
    ExerciseBrowser --> ExerciseService
    Vault --> VaultService
    
    %% State Management to Services
    UserStore --> FirebaseService
    MealsStore --> FirebaseService
    WorkoutCartStore --> FirebaseService
    DashboardStore --> FirebaseService
    
    ExerciseService --> ExerciseDBAPI
    VaultService --> Firebase
    PersistenceService --> Browser
    
    %% Frontend to Backend Communication
    Home -->|"Recipe Requests<br/>HTTP API Calls"| ExpressServer
    ExerciseBrowser -->|"Exercise Data<br/>HTTP API Calls"| ExpressServer
    
    %% Backend Internal Communication
    ExpressServer --> CORS
    ExpressServer --> Auth
    ExpressServer --> RecipeRoutes
    ExpressServer --> GeminiRoutes
    
    RecipeRoutes --> RecipeController
    GeminiRoutes --> GeminiController
    
    %% Backend to External Services
    RecipeController -->|"Recipe Queries<br/>HTTP API Calls"| SpoonacularAPI
    GeminiController -->|"AI Requests<br/>Content Generation"| GeminiAPI
    
    %% External Service Responses
    Firebase -->|"User Data<br/>Authentication Tokens<br/>Database Records<br/>File URLs"| FirebaseService
    SpoonacularAPI -->|"Recipe Data<br/>JSON Responses"| RecipeController
    ExerciseDBAPI -->|"Exercise Data<br/>JSON Responses"| ExerciseService
    GeminiAPI -->|"AI Content<br/>Generated Text"| GeminiController
    
    %% Response Flow Back to Client
    RecipeController -->|"Recipe Data<br/>JSON Responses"| ExpressServer
    GeminiController -->|"AI Content<br/>JSON Responses"| ExpressServer
    ExpressServer -->|"API Responses<br/>HTTP Responses"| Home
    ExpressServer -->|"API Responses<br/>HTTP Responses"| ExerciseBrowser
    
    FirebaseService -->|"User State<br/>Authentication Status<br/>Data Updates<br/>Real-time Sync"| UserStore
    FirebaseService -->|"Data Updates<br/>Real-time Sync"| MealsStore
    FirebaseService -->|"Data Updates<br/>Real-time Sync"| WorkoutCartStore
    FirebaseService -->|"Data Updates<br/>Real-time Sync"| DashboardStore
    
    ExerciseService -->|"Exercise Data<br/>Search Results"| ExerciseBrowser
    VaultService -->|"File Data<br/>Upload Status"| Vault
    
    %% State Updates to UI
    UserStore -->|"Auth State<br/>User Status"| App
    MealsStore -->|"Calorie Data<br/>Progress Updates"| CalorieProgress
    WorkoutCartStore -->|"Cart State<br/>Exercise List"| WorkoutCart
    DashboardStore -->|"Layout State<br/>Widget Positions"| Dashboard
    
    %% Real-time Data Flow
    Firebase -.->|"Real-time Updates<br/>WebSocket Connection"| FirebaseService
    FirebaseService -.->|"Live Data Sync"| UserStore
    FirebaseService -.->|"Live Data Sync"| MealsStore
    FirebaseService -.->|"Live Data Sync"| WorkoutCartStore
    FirebaseService -.->|"Live Data Sync"| DashboardStore



